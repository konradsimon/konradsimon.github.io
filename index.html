

<!DOCTYPE html>

<html lang="en">
	<head>
		<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
		<title>404.zero</title>
		<!-- PRELOAD FONTS -->
		<link rel="preload" href="fonts/IBMPlexMono-Medium.ttf" as="font" crossorigin="anonymous" />
		<link rel="preload" href="fonts/IBMPlexMono-SemiBold.ttf" as="font" crossorigin="anonymous" />
		<link rel="preload" href="fonts/IBMPlexMono-Regular.ttf" as="font" crossorigin="anonymous" />
		<link rel="preload" href="fonts/IBMPlexMono-Bold.ttf" as="font" crossorigin="anonymous" />
		<link rel="preload" href="fonts/IBMPlexMono-Light.ttf" as="font" crossorigin="anonymous" />

		<!-- FAVICON -->
		<link rel="icon" href="ico.svg">
		<link rel="apple-touch-icon" href="ico.png">
		<link rel="icon" type="image/png" href="icons/favicon16x16.png" sizes="16x16"/>
		<link rel="icon" type="image/png" href="icons/favicon32x32.png" sizes="32x32"/>
		<link rel="icon" type="image/png" href="icons/favicon96x96.png" sizes="96x96"/>
		<link rel="apple-touch-icon" sizes="72x72" href="icons/touch-ipad.png"/>
		<link rel="apple-touch-icon" sizes="114x114" href="icons/touch-iphone.png"/>
		<link rel="apple-touch-icon" sizes="152x152" href="icons/touch-ipad-ret.png"/>

		<!-- OPENGRAPH -->
		<!-- <meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1">
		<meta name="twitter:card" content="summary" />
		<meta name="twitter:site" content="@404dotzero" />
		<meta name="twitter:creator" content="@404dotzero" />
		<meta property="og:url" content="http://404zero.com" />
		<meta property="og:title" content="404.zero" />
		<meta property="og:description" content="404.zero" />
		<meta property="og:image" content="og.jpg" /> -->
		
		<link rel="stylesheet" href="styles.css">

		
	</head>
	<body style="cursor: default;">
		
		<canvas id = 'canvas'></canvas>
		<img id="image" src="landing.png" alt="Beschreibung des Bildes">

		<div id='bio' class='infoText'>
			<!-- <p class="p1">404.zero</p> -->
			<!-- <h1>404.zero<h1> -->

			<h1>404.zero</h1>
			<h2>This accomplished and ever-ambitious duo of A/V architects and toolmakers cook up mind-altering experiences in generative art that require expertise in math, coding and the science of sound. </h2>
			
			<h2>By creating mesmerizing digital matter of frighteningly porous frontiers exclusively through coding and modular gear, they push back the limits of footage and sample-free language that is opulent and breathtakingly singular. Taking as starting points their most irrepressible fascinations with death, the unknown and the cosmos, they craft thrilling, precise, painterly code-art that broaches big philosophical questions and provides mesmerizing though highly speculative answers.</h2>
			
			<h2>Together, Kristina and Aleksandr create modern generative art and innovative tools that raise the bar on the synergistic possibilities of visuals and sound. Since esteblishing of 404.zero in 2016, they’ve collaborated on a slew of immersive affairs, always up for the challenge of conjuring new things—modular music, generative visuals, and media production tools.
			</h2>
			
			<h2>They participated in many international festivals all around the world. Including Dark Mofo, MUTEK, GAMMA, Electric Castle Festival, LACMA, DIAGE, Circle of Light, e.t.c. 404’s works were selected by Japan Media Arts Festival and awarded by Genius Loci Weimar Festival, IMAP festival. Their debut music album 404.0 was released on Icelandic music label Bedroom Community in 2020.</h2>
			<h1>Social & Contacts</h1>
			<p><a href="https://twitter.com/404dotzero" >Twitter</a></p>
			<p><a href="https://www.instagram.com/404.zero" >Instagram</a></p>
			<p><a href="https://www.youtube.com/@404zero" >Youtube</a></p>
			<p><a href="https://vimeo.com/404zero" >Vimeo</a></p>
			<p ><a  id='mail' style="cursor:pointer">Mail</a></p>
			
			<!-- <h1>Upcoming shows</h1>
			<p>ISOTRP Live at <a href="https://tokyo.mutek.org/en" >MUTEK JP</a>, December 9, Tokyo, Japan</p>
			 -->
			<h1>Latest Releases</h1>
			<p><a href='/zerror'>ZERROR</a> TouchDesigner Plug-in</p>
			<p>ISOTRP <a href="https://404zero.bandcamp.com/album/isotrp-2" >Bandcamp</a>
					  <a href="https://music.apple.com/id/album/isotrp/1706158717">iTunes</a>
					  <a href="https://open.spotify.com/album/3ktnWCodjB2RYN3moYjTwe">Spotify</a>
					  <a href="https://songwhip.com/404zero/isotrp">Other</a></p>
			<p><a href="https://youtu.be/u0KeK9RipBE" >Gerasim</a> (Music Video)</p>
			<p><a href="https://youtu.be/lo4AyHpTS2E" >Alice's Train</a> (Music Video)</p>
			<h1>Software and Plug-ins</h1>
			<p><a href='/zerror'>ZERROR</a> plug-in for TouchDesigner</p>

			<h1><a href='/installationgen'>Light Installations</a></h1>
			<!-- <iframe width="560" height="315" src="https://www.youtube.com/embed/n1e6DWSnqpI" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" allowfullscreen></iframe> -->
			<p><a href='/beams'>3.24</a> at BEAMS, London, UK 2023</p>
			<p><a href="https://youtu.be/n1e6DWSnqpI" >3.2</a> at Dark Mofo, Tasmania, 2021</p>
			<p><a href="https://youtu.be/rG9YW8tmE3Y" >3.1</a> 2020</p>
			<p><a href="https://youtu.be/JW0hwo7tIWw" >Arrival</a> at Avant Gardner, USA, 2019</p>
			<p><a href="https://youtu.be/ai2vYGcfzBE" >8.0</a> 2019</p>
			<p><a href="https://youtu.be/xj75aTd6Gmk" >8.0.1</a> 2020</p>
			<p><a href="https://vimeo.com/192918334" >No Time. No Future. I'm here. RIP. </a>2016</p>
			<h1><a href='/audiovisual'>Audiovisual</a></h1>
			<p><a href="https://vimeo.com/215426395" >Phosphenes</a></p>
			<p><a href="https://vimeo.com/237152011" >Circle Of Light</a></p>
			<p><a href="https://youtu.be/sjKIrW0mvns" >Black Sunday</a></p>
			<p><a href="https://youtu.be/sjKIrW0mvns" >404.1</a></p>
			<p><a href="https://vimeo.com/214301962" >Gig For Sleepers</a></p>
			<p><a href="https://vimeo.com/508573357" >Deep Echo</a></p>
			
			<h1>Music</h1>
			<p><a href="https://404zero.bandcamp.com/" >Bandcamp</a></p>
			<p><a href="https://open.spotify.com/artist/5lri0rQHZIrjykaH4jZrvq" >Spotify</a></p>
			<p><a href="https://www.deezer.com/en/artist/87130592" >Deezer</a></p>
			<p><a href="https://music.apple.com/id/artist/404-zero/1500633430" >Apple Music</a></p>
			<h1>NFT</h1>
			<p><a href="https://hiddeninnoise.com/" >Hidden In Noise</a></p>
			<p><a href="https://innoisewetrust.com/" >In Noise We Trust</a></p>
			<p><a href="https://lightonchain.com/" >LightOnChain</a></p>
			<p><a href="https://superrare.com/404zero" >Superrare</a></p>
			<!-- <h1>INFO</h1>
			<p><a href="" >Bio</a></p>
			<p><a href="" >Press</a></p> -->
			<h1>Press</h1>
			<p><a href="https://block.fm/news/404-zero-interview" >Block.fm [jp]</a></p>
			<p><a href="https://hypebeast.com/2021/12/studio-visits-404-zero" >Hypebeast</a></p>
			<p><a href="https://louderthanwar.com/404-zero-404-0-album-review/" >Louder Than War</a></p>
			<p><a href="https://clotmag.com/interviews/404-zero-the-architecture-of-nothingness-and-metaphysics-of-time-and-space-in-mind-bending-audiovisual-code-art" >CLOT Magazine</a></p>
			<p><a href="https://www.loudandquiet.com/reviews/404-0-404-zero/" >Loud And Quiet</a></p>
			<p><a href="https://bedroomcommunity.net/404zero-4040" >Bedroom Community</a></p>
			<p><a href="https://www.decodedmagazine.com/404zero-breaking-through-with-generative-art-and-modular-synthesizers/" >Decoded Magazine</a></p>
			<p><a href="https://www.nastymagazine.com/art-culture/404-zero-the-dark-sound-of-space/" >Nasty Magazine</a></p>
			<p><a href="https://visualatelier8.com/404zero-generating-visual-art-from-sound/" >Visualatelier 8</a></p>
			<p><a href="http://digicult.it/design/advanced-technology-prophetic-work-and-mysterious-meanings-of-life-interview-with-404-zero/" >Digicult</a></p>
			<p><a href="https://openlab.fm/news/digital-storms-a-v-artists-selected-404-zero" >openlab.fm</a></p>
			<p><a href="https://beatsperminute.com/album-review-404-zero-404-0/" >beatsperminute.com</a></p>
			<p><a href="https://derivative.ca/community-post/prolific-artist-duo-404zero-release-zerror-control-ui-touchdesigner/60966" >derivative.ca</a></p>
			<p><a href="https://theculturetrip.com/europe/russia/articles/russian-artists-404-zero-on-creative-influences-processes-and-challenges/" >theculturetrip.com</a></p>
			
			

			<p class="p0">©404.ZERO 2023</p>

		</div>
		<div id='rightMenu'>
			<div id='redDotParent' class="menuItem">
				<!-- <a href="#" class="right"> -->
					<div id='redDot' class="dot"></div>
				<!-- </a> -->

			</div>
			<!-- <div class="menuItem"><a href ="https://twitter.com/404dotzero" class = "link">twitter</a></div>
			<div class="menuItem"><a href ="https://vimeo.com/404zero" class = "link">vimeo</a></div>
			<div class="menuItem"><a href ="https://www.instagram.com/404.zero" class = "link">instagram</a></div>
			<div class="menuItem"><a href ="https://open.spotify.com/artist/5lri0rQHZIrjykaH4jZrvq" class = "link">spotify</a></div>
			<div class="menuItem"><a href ="https://www.youtube.com/@404zero" class = "link">youtube</a></div> -->
		</div >

		
		<audio id="noiseAudio1" loop="true" src="noiseA.mp3" crossorigin="anonymous"></audio>
		<audio id="noiseAudio2" loop="true" src="noiseB.mp3" crossorigin="anonymous"></audio>


		<script id="example" type="x-shader/x-fragment">

			


</script>

		<script>

			
			if ( !window.requestAnimationFrame ) {

				window.requestAnimationFrame = ( function() {

					return window.webkitRequestAnimationFrame ||
						window.mozRequestAnimationFrame ||
						window.oRequestAnimationFrame ||
						window.msRequestAnimationFrame ||
						function ( callback, element ) {

							window.setTimeout( callback, 1000 / 60 );

						};

				} )();

			}

	
			if (!Date.now) {
				Date.now = function() {
					return +new Date();
				};
			}

			var compileTimer, errorLines = [];
			var code, canvas, gl, buffer, currentProgram, vertexPosition, screenVertexPosition, panButton,
			parameters = { startTime: Date.now(), time: 0, mouseX: 0.3, mouseY: 0.9, screenWidth: 0, screenHeight: 0, sound: 0 },
			surface = { centerX: 0, centerY: 0, width: 1, height: 1, isPanning: false, isZooming: false, lastX: 0, lastY: 0 },
			frontTarget, backTarget, screenProgram, getWebGL, compileOnChangeCode = true;
			var lastX,lastY;
			
			//audio
			var audioCtx1,audioCtx2;
			var noiseAudio1 = document.getElementById("noiseAudio1");
			var noiseAudio2 = document.getElementById("noiseAudio2");
			var noiseAudio1Source, noiseAudio2Source, noiseAudio1Gain, noiseAudio2Gain; 
			var sOn = false;
			var drag = false;

			init();
			if (gl) { animate(); }
	
			

			function showHideMenu(show){
				let cols = document.getElementsByClassName('menuItem');
				for(let i = 0; i < cols.length; i++) {
					if (cols[i].id!= 'redDotParent') cols[i].style.display = show;
				}
			}
			}



			function noDragClick(){
				doAnimate = true;
					if (sOn){
						playAudio(false);
						sOn = false;
					}
					else{
						playAudio(true);
						sOn = true;
					}
			}

			function init() {

				document.getElementById('mail').addEventListener('click',function ( event ) {
					event.preventDefault();
					let x = '';
					//welcome to lol
					//	         0   1   2   3   4   5   6   7   8   9   10  11  12  13  14  15
					let arrM = ['o','e','h','l','.','a','g','i','m','@','4','0','c','e','z','r']
					let arrI = [2,1,3,3,0,9,10,11,10,14,13,15,0,4,12,0,8]
					for (let i = 0; i<arrI.length; i ++){
						x += arrM[arrI[i]];
					}
					document.getElementById('mail').innerHTML = 'copied to clipboard';
					navigator.clipboard.writeText(x);
				}, false );

				if (!document.addEventListener) {
					document.location = 'http://get.webgl.org/';
					return;
				}

				document.getElementById('redDot').addEventListener('click',function ( event ) {
					doAnimate = !doAnimate;
					if (!doAnimate){
						playAudio(false)
						document.getElementById('bio').style.display = 'block';
						document.getElementById('redDot').style.backgroundColor = '#111';
						showHideMenu('none');

					}
					else{
						if (sOn){
							playAudio(true);
						}
						document.getElementById('bio').style.display = 'none';
						document.getElementById('redDot').style.backgroundColor = '#F00';
						showHideMenu('block');
						
					}
				}, false );


				canvas = document.getElementById( 'image' );
				
				

				canvas.addEventListener( 'mousedown', function ( event ) {
					lastX = event.clientX;
					lastY = event.clientY;
				}, false );

				canvas.addEventListener( 'mouseup', function ( event ) {
					if (lastX == event.clientX && lastY == event.clientY) noDragClick();
				}, false );

				canvas.addEventListener('touchstart', function(e) {
					e.preventDefault();
					event = e.touches[0];
					lastX = event.clientX;
					lastY = event.clientY;
					drag = false;
				}, false);

				canvas.addEventListener( 'touchend', function ( e ) {
					event = e.touches[0];
					if (!drag) noDragClick();
				}, false );



				// Initialise WebGL
				try {

					gl = canvas.getContext( 'experimental-webgl', { preserveDrawingBuffer: true } );

				} catch( error ) { }

				if ( !gl ) {

					alert("WebGL not supported, but code will be shown.");

				} else {
					
					// enable dFdx, dFdy, fwidth
					gl.getExtension('OES_standard_derivatives');
					buffer = gl.createBuffer();
					gl.bindBuffer( gl.ARRAY_BUFFER, buffer );
					gl.bufferData( gl.ARRAY_BUFFER, new Float32Array( [ - 1.0, - 1.0, 1.0, - 1.0, - 1.0, 1.0, 1.0, - 1.0, 1.0, 1.0, - 1.0, 1.0 ] ), gl.STATIC_DRAW );
					surface.buffer = gl.createBuffer();
				}
				clearTimeout(compileTimer);
				compileTimer = setTimeout(compile, 500);
		
				var clientXLast, clientYLast;
				document.addEventListener( 'mousemove', function ( event ) {

					var clientX = event.clientX;
					var clientY = event.clientY;

					if (clientXLast == clientX && clientYLast == clientY)
						return;

					clientXLast = clientX;
					clientYLast = clientY;
				
					parameters.mouseX = clientX / window.innerWidth;
					parameters.mouseY = 1 - clientY / window.innerHeight;
					
				}, false );



				canvas.addEventListener( "touchmove", function ( e ) {
					drag = true;
					let event = e.touches[0];
					e.preventDefault();
					let clientX = event.clientX;
					let clientY = event.clientY;

					if (clientXLast == clientX && clientYLast == clientY)
						return;

					clientXLast = clientX;
					clientYLast = clientY;
					
					parameters.mouseX = clientX / window.innerWidth;
					parameters.mouseY = 1 - clientY / window.innerHeight;
					
				}, false );

				onWindowResize();
				window.addEventListener( 'resize', onWindowResize, false );
				compileScreenProgram();

			}

			function computeSurfaceCorners() {

				if (gl) {

					surface.width = surface.height * parameters.screenWidth / parameters.screenHeight;
					
					var halfWidth = surface.width * 0.5, halfHeight = surface.height * 0.5;
					
					gl.bindBuffer( gl.ARRAY_BUFFER, surface.buffer );
					gl.bufferData( gl.ARRAY_BUFFER, new Float32Array( [
						surface.centerX - halfWidth, surface.centerY - halfHeight,
						surface.centerX + halfWidth, surface.centerY - halfHeight,
						surface.centerX - halfWidth, surface.centerY + halfHeight,
						surface.centerX + halfWidth, surface.centerY - halfHeight,
						surface.centerX + halfWidth, surface.centerY + halfHeight,
						surface.centerX - halfWidth, surface.centerY + halfHeight ] ), gl.STATIC_DRAW );

				}

			}

			function resetSurface() {

				surface.centerX = surface.centerY = 0;
				surface.height = 1;
				computeSurfaceCorners();

			}

			function compile() {
			
				
				var amplitude = 0;
				var program = gl.createProgram();
				var fragment = document.getElementById( 'example' ).textContent;
				var vertex = document.getElementById( 'surfaceVertexShader' ).textContent;
				var vs = createShader( vertex, gl.VERTEX_SHADER );
				var fs = createShader( fragment, gl.FRAGMENT_SHADER );
				if ( vs == null || fs == null ) return null;
				gl.attachShader( program, vs );
				gl.attachShader( program, fs );
				gl.deleteShader( vs );
				gl.deleteShader( fs );
				gl.linkProgram( program );
				if ( !gl.getProgramParameter( program, gl.LINK_STATUS ) ) {
					var error = gl.getProgramInfoLog( program );
					console.error( error );
					console.error( 'VALIDATE_STATUS: ' + gl.getProgramParameter( program, gl.VALIDATE_STATUS ), 'ERROR: ' + gl.getError() );
					return;
				}

				if ( currentProgram ) {
					gl.deleteProgram( currentProgram );
					// setURL( fragment );
				}
				currentProgram = program;
				cacheUniformLocation( program, 'time' );
				cacheUniformLocation( program, 'lfoJs' );
				cacheUniformLocation( program, 'mouse' );
				cacheUniformLocation( program, 'resolution' );
				cacheUniformLocation( program, 'backbuffer' );
				cacheUniformLocation( program, 'surfaceSize' );
				cacheUniformLocation( program, 'sound' );
				cacheUniformLocation( program, 'texture' );
				gl.useProgram( currentProgram );
				surface.positionAttribute = gl.getAttribLocation(currentProgram, "surfacePosAttrib");
				gl.enableVertexAttribArray(surface.positionAttribute);
				vertexPosition = gl.getAttribLocation(currentProgram, "position");
				gl.enableVertexAttribArray( vertexPosition );

			}

			function compileScreenProgram() {
			
				if (!gl) { return; }

				var program = gl.createProgram();
				var fragment = document.getElementById( 'fragmentShader' ).textContent;
				var vertex = document.getElementById( 'vertexShader' ).textContent;
				var vs = createShader( vertex, gl.VERTEX_SHADER );
				var fs = createShader( fragment, gl.FRAGMENT_SHADER );
				gl.attachShader( program, vs );
				gl.attachShader( program, fs );
				gl.deleteShader( vs );
				gl.deleteShader( fs );
				gl.linkProgram( program );
				if ( !gl.getProgramParameter( program, gl.LINK_STATUS ) ) {
					console.error( 'VALIDATE_STATUS: ' + gl.getProgramParameter( program, gl.VALIDATE_STATUS ), 'ERROR: ' + gl.getError() );
					return;
				}
				screenProgram = program;
				gl.useProgram( screenProgram );
				cacheUniformLocation( program, 'resolution' );
				cacheUniformLocation( program, 'texture' );
				screenVertexPosition = gl.getAttribLocation(screenProgram, "position");
				gl.enableVertexAttribArray( screenVertexPosition );

			}

			function cacheUniformLocation( program, label ) {

				if ( program.uniformsCache === undefined ) {

					program.uniformsCache = {};

				}

				program.uniformsCache[ label ] = gl.getUniformLocation( program, label );

			}

			function createTarget( width, height ) {

				var target = {};

				target.framebuffer = gl.createFramebuffer();
				target.renderbuffer = gl.createRenderbuffer();
				target.texture = gl.createTexture();

				// set up framebuffer

				gl.bindTexture( gl.TEXTURE_2D, target.texture );
				gl.texImage2D( gl.TEXTURE_2D, 0, gl.RGBA, width, height, 0, gl.RGBA, gl.UNSIGNED_BYTE, null );

				gl.texParameteri( gl.TEXTURE_2D, gl.TEXTURE_WRAP_S, gl.CLAMP_TO_EDGE );
				gl.texParameteri( gl.TEXTURE_2D, gl.TEXTURE_WRAP_T, gl.CLAMP_TO_EDGE );

				gl.texParameteri( gl.TEXTURE_2D, gl.TEXTURE_MAG_FILTER, gl.NEAREST );
				gl.texParameteri( gl.TEXTURE_2D, gl.TEXTURE_MIN_FILTER, gl.NEAREST );

				gl.bindFramebuffer( gl.FRAMEBUFFER, target.framebuffer );
				gl.framebufferTexture2D( gl.FRAMEBUFFER, gl.COLOR_ATTACHMENT0, gl.TEXTURE_2D, target.texture, 0 );

				// set up renderbuffer

				gl.bindRenderbuffer( gl.RENDERBUFFER, target.renderbuffer );

				gl.renderbufferStorage( gl.RENDERBUFFER, gl.DEPTH_COMPONENT16, width, height );
				gl.framebufferRenderbuffer( gl.FRAMEBUFFER, gl.DEPTH_ATTACHMENT, gl.RENDERBUFFER, target.renderbuffer );

				// clean up

				gl.bindTexture( gl.TEXTURE_2D, null );
				gl.bindRenderbuffer( gl.RENDERBUFFER, null );
				gl.bindFramebuffer( gl.FRAMEBUFFER, null);

				return target;

			}

			function createRenderTargets() {
				frontTarget = createTarget( parameters.screenWidth, parameters.screenHeight );
				backTarget = createTarget( parameters.screenWidth, parameters.screenHeight );
			}

			var dummyFunction = function() {};

			function createShader( src, type ) {
			
				var shader = gl.createShader( type );
				gl.shaderSource( shader, src );
				gl.compileShader( shader );
				return shader;

			}


			function onWindowResize( event ) {

				canvas.width = window.innerWidth;
				canvas.height = window.innerHeight;
				canvas.style.width = window.innerWidth + 'px';
				canvas.style.height = window.innerHeight + 'px';
				parameters.screenWidth = canvas.width;
				parameters.screenHeight = canvas.height;
				computeSurfaceCorners();

				if (gl) {
					gl.viewport( 0, 0, canvas.width, canvas.height );
					createRenderTargets();
				}
			}

			//
			function limitPar(v){
			if (v < 0) return 0;
			if (v > 1) return 1;
			return v;
			
			}
			
		
			function animate() {
				
				if (doAnimate){
					let shift = 0.05;
					let freq = shift;
					let thresh = 0.15
					if (Math.abs(parameters.mouseY-0.5) < thresh){
						 let v =  (thresh-Math.abs(parameters.mouseY-0.5))/thresh;
						 v = v*v*v;
						 // console.log('V:', v);
						 freq = v*30 +shift;
						}
					lfoPhase = lfoPhase+(performance.now() - lastTime)*freq/1000;
					lfoPhase = (lfoPhase%1);
					lastTime = performance.now();
					// console.log(freq,parameters.mouseY);
					// var lfo1 = Math.sin((Date.now() - parameters.startTime)*freq/1000+parameters.mouseX*parameters.mouseY*1200);
					lfo1 = Math.sin(lfoPhase*Math.PI*2);
					
					// console.log(parameters.mouseY);
					var lfo2 = - lfo1;
					var minLfo = 0.3;
					amplitude =0.0;
					if(audioCtx1){
						noiseAudio1Gain.gain.value = limitPar(lfo2+minLfo)*1;
						noiseAudio2Gain.gain.value = limitPar(lfo1+minLfo)*1;
						// noiseAudio2.volume = limitPar(lfo1+minLfo)*0;
					}
					render();
				}

				requestAnimationFrame( animate );

			}

			function render() {

				if ( !currentProgram ) return;

				parameters.time = Date.now() - parameters.startTime;

				// Set uniforms for custom shader

				gl.useProgram( currentProgram );

				gl.uniform1f( currentProgram.uniformsCache[ 'time' ], parameters.time / 1000.0 );
				gl.uniform1f( currentProgram.uniformsCache[ 'lfoJs' ],lfo1 );
				gl.uniform1f( currentProgram.uniformsCache[ 'sound' ], amplitude );
				gl.uniform2f( currentProgram.uniformsCache[ 'mouse' ], parameters.mouseX, 1-parameters.mouseY );
				gl.uniform2f( currentProgram.uniformsCache[ 'resolution' ], parameters.screenWidth, parameters.screenHeight );
				gl.uniform1i( currentProgram.uniformsCache[ 'backbuffer' ], 0 );
				gl.uniform2f( currentProgram.uniformsCache[ 'surfaceSize' ], surface.width, surface.height );

				gl.bindBuffer( gl.ARRAY_BUFFER, surface.buffer );
				gl.vertexAttribPointer( surface.positionAttribute, 2, gl.FLOAT, false, 0, 0 );
				
				gl.bindBuffer( gl.ARRAY_BUFFER, buffer );
				gl.vertexAttribPointer( vertexPosition, 2, gl.FLOAT, false, 0, 0 );

				gl.activeTexture( gl.TEXTURE0 );
				gl.bindTexture( gl.TEXTURE_2D, backTarget.texture );

				// Render custom shader to front buffer

				gl.bindFramebuffer( gl.FRAMEBUFFER, frontTarget.framebuffer );

				gl.clear( gl.COLOR_BUFFER_BIT | gl.DEPTH_BUFFER_BIT );
				gl.drawArrays( gl.TRIANGLES, 0, 6 );

				// Set uniforms for screen shader

				gl.useProgram( screenProgram );

				gl.uniform2f( screenProgram.uniformsCache[ 'resolution' ], parameters.screenWidth, parameters.screenHeight );
				gl.uniform1i( screenProgram.uniformsCache[ 'texture' ], 1 );

				gl.bindBuffer( gl.ARRAY_BUFFER, buffer );
				gl.vertexAttribPointer( screenVertexPosition, 2, gl.FLOAT, false, 0, 0 );
				
				gl.activeTexture( gl.TEXTURE1 );
				gl.bindTexture( gl.TEXTURE_2D, frontTarget.texture );

				// Render front buffer to screen

				gl.bindFramebuffer( gl.FRAMEBUFFER, null );

				gl.clear( gl.COLOR_BUFFER_BIT | gl.DEPTH_BUFFER_BIT );
				gl.drawArrays( gl.TRIANGLES, 0, 6 );

				// Swap buffers

				var tmp = frontTarget;
				frontTarget = backTarget;
				backTarget = tmp;

			}

		</script>


	</html>
